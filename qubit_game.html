<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Qubit Game: Coin Spin Analogy with Sound</title>
  <script src="https://www.x3dom.org/download/x3dom.js"></script>
  <link rel="stylesheet" href="https://www.x3dom.org/download/x3dom.css">
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #f3f6fc; }
    #result { font-size: 1.5em; margin: 20px; }
    button { font-size: 1.2em; padding: 10px 20px; margin-top: 10px; }
    #x3d-container { margin: auto; width: 500px; }
  </style>
</head>
<body>
  <h1>Qubit Game: Coin Spin Analogy</h1>
  <div id="x3d-container">
    <x3d id="x3d" width="500px" height="350px">
      <scene>
        <viewpoint position="0 0 5"></viewpoint>
        <transform id="coinTransform">
          <shape>
            <appearance>
              <material diffuseColor="0.8 0.8 0.2" specularColor="0.8 0.8 0.5"/>
            </appearance>
            <cylinder radius="1" height="0.1"/>
          </shape>
          <!-- Heads side -->
          <transform translation="0 0.05 0">
            <shape>
              <appearance>
                <material diffuseColor="0.2 0.7 1" />
              </appearance>
              <text string='"0"' solid='false'>
                <fontstyle family='"SANS"' size='0.5' justify='"MIDDLE"' />
              </text>
            </shape>
          </transform>
          <!-- Tails side -->
          <transform translation="0 -0.05 0" rotation="1 0 0 3.14159">
            <shape>
              <appearance>
                <material diffuseColor="1 0.5 0.2" />
              </appearance>
              <text string='"1"' solid='false'>
                <fontstyle family='"SANS"' size='0.5' justify='"MIDDLE"' />
              </text>
            </shape>
          </transform>
        </transform>
      </scene>
    </x3d>
  </div>
  <div>
    <button id="spinBtn">Spin (Superposition)</button>
    <button id="measureBtn" disabled>Measure (Collapse)</button>
  </div>
  <div id="result"></div>

  <!-- Sound effects -->
  <audio id="spinSound" src="https://cdn.pixabay.com/audio/2022/07/26/audio_123b2f9b2e.mp3"></audio>
  <audio id="headsSound" src="https://cdn.pixabay.com/audio/2022/10/16/audio_128f3a4e19.mp3"></audio>
  <audio id="tailsSound" src="https://cdn.pixabay.com/audio/2022/10/16/audio_1291c3b2aa.mp3"></audio>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      let spinning = false;
      let spinInterval = null;
      const coinTransform = document.getElementById('coinTransform');
      const spinBtn = document.getElementById('spinBtn');
      const measureBtn = document.getElementById('measureBtn');
      const resultDiv = document.getElementById('result');
      const spinSound = document.getElementById('spinSound');
      const headsSound = document.getElementById('headsSound');
      const tailsSound = document.getElementById('tailsSound');
      let angle = 0;

      function playSound(sound) {
        sound.pause();
        sound.currentTime = 0;
        sound.play();
      }

      spinBtn.onclick = function() {
        if (spinning) return;
        spinning = true;
        measureBtn.disabled = false;
        spinBtn.disabled = true;
        resultDiv.textContent = "Coin is spinning... (Qubit in superposition)";
        playSound(spinSound);
        spinInterval = setInterval(() => {
          angle += 0.2;
          coinTransform.setAttribute('rotation', `1 0 0 ${angle}`);
        }, 30);
      };

      measureBtn.onclick = function() {
        if (!spinning) return;
        spinning = false;
        spinBtn.disabled = false;
        measureBtn.disabled = true;
        clearInterval(spinInterval);

        // Simulate measurement: random collapse to 0 or 1
        const outcome = Math.random() < 0.5 ? 0 : 1;
        if (outcome === 0) {
          coinTransform.setAttribute('rotation', '1 0 0 0');
          resultDiv.textContent = "Measured: Qubit collapsed to |0⟩ (Heads)";
          setTimeout(() => playSound(headsSound), 200);
        } else {
          coinTransform.setAttribute('rotation', '1 0 0 3.14159');
          resultDiv.textContent = "Measured: Qubit collapsed to |1⟩ (Tails)";
          setTimeout(() => playSound(tailsSound), 200);
        }
      };
    });
  </script>
</body>
</html>